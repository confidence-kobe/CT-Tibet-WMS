<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç»Ÿè®¡æŠ¥è¡¨ - è¥¿è—ç”µä¿¡ä»“åº“ç®¡ç†ç³»ç»Ÿ</title>
    <link rel="stylesheet" href="../assets/css/pc-common.css">
</head>
<body>
    <div class="app-container">
        <aside class="sidebar">
            <div class="sidebar-header"><div class="sidebar-logo">ğŸ“¦</div><div class="sidebar-title">ä»“åº“ç®¡ç†ç³»ç»Ÿ</div></div>
            <nav class="sidebar-menu">
                <div class="menu-item" onclick="location.href='dashboard.html'"><span class="menu-item-icon">ğŸ </span><span>å·¥ä½œå°</span></div>
                <div class="menu-item" onclick="location.href='inbound-list.html'"><span class="menu-item-icon">ğŸ“¥</span><span>å…¥åº“ç®¡ç†</span></div>
                <div class="menu-item" onclick="location.href='outbound-list.html'"><span class="menu-item-icon">ğŸ“¤</span><span>å‡ºåº“ç®¡ç†</span></div>
                <div class="menu-item" onclick="location.href='approval-list.html'"><span class="menu-item-icon">âœ“</span><span>å®¡æ‰¹ç®¡ç†</span></div>
                <div class="menu-item" onclick="location.href='inventory-list.html'"><span class="menu-item-icon">ğŸ“Š</span><span>åº“å­˜æŸ¥è¯¢</span></div>
                <div class="menu-item active"><span class="menu-item-icon">ğŸ“ˆ</span><span>ç»Ÿè®¡æŠ¥è¡¨</span></div>
            </nav>
        </aside>

        <main class="main-content">
            <header class="top-header">
                <div class="header-left"><div class="breadcrumb"><span class="breadcrumb-item active">ç»Ÿè®¡æŠ¥è¡¨</span></div></div>
                <div class="header-right">
                    <div class="notification-btn"><span>ğŸ””</span><span class="notification-badge">2</span></div>
                    <div class="user-info"><div class="user-avatar">å¼ </div><span>å¼ ä¸‰</span></div>
                </div>
            </header>

            <div class="content-wrapper">
                <!-- æ—¶é—´èŒƒå›´é€‰æ‹© -->
                <div class="card">
                    <div style="display: flex; gap: 16px; align-items: center;">
                        <label style="font-weight: 500;">ç»Ÿè®¡å‘¨æœŸï¼š</label>
                        <button class="btn btn-default" onclick="switchPeriod('today')">ä»Šæ—¥</button>
                        <button class="btn btn-primary" onclick="switchPeriod('week')">æœ¬å‘¨</button>
                        <button class="btn btn-default" onclick="switchPeriod('month')">æœ¬æœˆ</button>
                        <div style="flex: 1; display: flex; gap: 8px; justify-content: flex-end;">
                            <input type="date" class="form-input" style="width: 150px;" id="startDate">
                            <span>è‡³</span>
                            <input type="date" class="form-input" style="width: 150px;" id="endDate">
                            <button class="btn btn-default" onclick="customQuery()">æŸ¥è¯¢</button>
                            <button class="btn btn-default" onclick="exportReport()">å¯¼å‡ºExcel</button>
                        </div>
                    </div>
                </div>

                <!-- æ•°æ®æ¦‚è§ˆ -->
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; margin-bottom: 24px;">
                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-title">å…¥åº“ç»Ÿè®¡</div>
                            <div class="stat-icon" style="color: #1890ff;">ğŸ“¥</div>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: end;">
                            <div>
                                <div class="stat-value" id="inboundCount">8</div>
                                <div class="stat-footer">å…¥åº“å•æ•°</div>
                            </div>
                            <div style="text-align: right;">
                                <div style="font-size: 20px; font-weight: 600; color: #52c41a;" id="inboundAmount">Â¥45,600</div>
                                <div class="stat-footer">å…¥åº“é‡‘é¢</div>
                            </div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-title">å‡ºåº“ç»Ÿè®¡</div>
                            <div class="stat-icon" style="color: #faad14;">ğŸ“¤</div>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: end;">
                            <div>
                                <div class="stat-value" id="outboundCount">12</div>
                                <div class="stat-footer">å‡ºåº“å•æ•°</div>
                            </div>
                            <div style="text-align: right;">
                                <div style="font-size: 20px; font-weight: 600; color: #f5222d;" id="outboundAmount">Â¥8,950</div>
                                <div class="stat-footer">å‡ºåº“é‡‘é¢</div>
                            </div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-title">ç”³è¯·ç»Ÿè®¡</div>
                            <div class="stat-icon" style="color: #52c41a;">âœ“</div>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: end;">
                            <div>
                                <div class="stat-value" id="applyCount">15</div>
                                <div class="stat-footer">ç”³è¯·æ€»æ•°</div>
                            </div>
                            <div style="text-align: right;">
                                <div style="font-size: 20px; font-weight: 600; color: #1890ff;" id="approveCount">13</div>
                                <div class="stat-footer">å·²å®¡æ‰¹æ•°</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- æŒ‰ç‰©èµ„åˆ†ç±»ç»Ÿè®¡ -->
                <div class="card">
                    <div class="card-header"><div class="card-title">ç‰©èµ„åˆ†ç±»ç»Ÿè®¡</div></div>
                    <table>
                        <thead>
                            <tr>
                                <th>ç‰©èµ„åˆ†ç±»</th>
                                <th>å…¥åº“æ¬¡æ•°</th>
                                <th>å…¥åº“é‡‘é¢</th>
                                <th>å‡ºåº“æ¬¡æ•°</th>
                                <th>å‡ºåº“é‡‘é¢</th>
                                <th>å‡€å¢é‡‘é¢</th>
                            </tr>
                        </thead>
                        <tbody id="categoryTable"></tbody>
                    </table>
                </div>

                <!-- è¶‹åŠ¿å›¾ï¼ˆæ¨¡æ‹Ÿï¼‰ -->
                <div class="card">
                    <div class="card-header"><div class="card-title">å‡ºå…¥åº“è¶‹åŠ¿ï¼ˆæœ€è¿‘7å¤©ï¼‰</div></div>
                    <div style="height: 300px; display: flex; align-items: end; gap: 16px; padding: 24px; background: #fafafa; border-radius: 4px;">
                        <div style="text-align: center; flex: 1;">
                            <div style="height: 120px; background: linear-gradient(to top, #1890ff, #69c0ff); border-radius: 4px 4px 0 0; margin-bottom: 8px;"></div>
                            <div style="font-size: 13px; color: #8c8c8c;">01-05</div>
                        </div>
                        <div style="text-align: center; flex: 1;">
                            <div style="height: 100px; background: linear-gradient(to top, #1890ff, #69c0ff); border-radius: 4px 4px 0 0; margin-bottom: 8px;"></div>
                            <div style="font-size: 13px; color: #8c8c8c;">01-06</div>
                        </div>
                        <div style="text-align: center; flex: 1;">
                            <div style="height: 60px; background: linear-gradient(to top, #1890ff, #69c0ff); border-radius: 4px 4px 0 0; margin-bottom: 8px;"></div>
                            <div style="font-size: 13px; color: #8c8c8c;">01-07</div>
                        </div>
                        <div style="text-align: center; flex: 1;">
                            <div style="height: 160px; background: linear-gradient(to top, #1890ff, #69c0ff); border-radius: 4px 4px 0 0; margin-bottom: 8px;"></div>
                            <div style="font-size: 13px; color: #8c8c8c;">01-08</div>
                        </div>
                        <div style="text-align: center; flex: 1;">
                            <div style="height: 90px; background: linear-gradient(to top, #1890ff, #69c0ff); border-radius: 4px 4px 0 0; margin-bottom: 8px;"></div>
                            <div style="font-size: 13px; color: #8c8c8c;">01-09</div>
                        </div>
                        <div style="text-align: center; flex: 1;">
                            <div style="height: 130px; background: linear-gradient(to top, #1890ff, #69c0ff); border-radius: 4px 4px 0 0; margin-bottom: 8px;"></div>
                            <div style="font-size: 13px; color: #8c8c8c;">01-10</div>
                        </div>
                        <div style="text-align: center; flex: 1;">
                            <div style="height: 80px; background: linear-gradient(to top, #1890ff, #69c0ff); border-radius: 4px 4px 0 0; margin-bottom: 8px;"></div>
                            <div style="font-size: 13px; color: #8c8c8c;">01-11</div>
                        </div>
                    </div>
                    <div style="margin-top: 16px; text-align: center; font-size: 13px; color: #8c8c8c;">
                        ğŸ’¡ å®é™…é¡¹ç›®ä¸­å¯ä½¿ç”¨ EChartsã€Chart.js ç­‰å›¾è¡¨åº“å®ç°æ›´ä¸“ä¸šçš„å¯è§†åŒ–æ•ˆæœ
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="../assets/js/mock-data.js"></script>
    <script src="../assets/js/common.js"></script>
    <script>
        let currentPeriod = 'week';

        function renderCategoryStats() {
            const tbody = document.getElementById('categoryTable');
            let html = '';

            mockData.statistics.byCategory.forEach(item => {
                const netAmount = item.inboundAmount - item.outboundAmount;
                const netClass = netAmount > 0 ? 'text-success' : (netAmount < 0 ? 'text-danger' : '');

                html += `
                    <tr>
                        <td>${item.category}</td>
                        <td>${item.inboundCount}</td>
                        <td class="text-success">${formatMoney(item.inboundAmount)}</td>
                        <td>${item.outboundCount}</td>
                        <td class="text-danger">${formatMoney(item.outboundAmount)}</td>
                        <td class="${netClass}">${formatMoney(netAmount)}</td>
                    </tr>
                `;
            });

            tbody.innerHTML = html;
        }

        function updateStats(period) {
            const stats = mockData.statistics[period];

            document.getElementById('inboundCount').textContent = stats.inboundCount;
            document.getElementById('inboundAmount').textContent = formatMoney(stats.inboundAmount);
            document.getElementById('outboundCount').textContent = stats.outboundCount;
            document.getElementById('outboundAmount').textContent = formatMoney(stats.outboundAmount);
            document.getElementById('applyCount').textContent = stats.applyCount;
            document.getElementById('approveCount').textContent = stats.approveCount;
        }

        function switchPeriod(period) {
            currentPeriod = period;
            updateStats(period);

            // æ›´æ–°æŒ‰é’®æ ·å¼
            document.querySelectorAll('.content-wrapper .btn').forEach((btn, i) => {
                if (i < 3) {
                    const periods = ['today', 'week', 'month'];
                    btn.className = 'btn ' + (periods[i] === period ? 'btn-primary' : 'btn-default');
                }
            });
        }

        function customQuery() {
            const startDate = document.getElementById('startDate').value;
            const endDate = document.getElementById('endDate').value;

            if (!startDate || !endDate) {
                Message.warning('è¯·é€‰æ‹©å¼€å§‹å’Œç»“æŸæ—¥æœŸ');
                return;
            }

            if (new Date(startDate) > new Date(endDate)) {
                Message.warning('å¼€å§‹æ—¥æœŸä¸èƒ½å¤§äºç»“æŸæ—¥æœŸ');
                return;
            }

            Loading.show('æ­£åœ¨æŸ¥è¯¢...');
            setTimeout(() => {
                Loading.hide();
                Message.success('æŸ¥è¯¢æˆåŠŸ');
                // å®é™…é¡¹ç›®ä¸­è¿™é‡Œä¼šè°ƒç”¨åç«¯API
            }, 1000);
        }

        function exportReport() {
            Message.info('æ­£åœ¨å¯¼å‡ºExcelæŠ¥è¡¨...');
            // å®é™…é¡¹ç›®ä¸­è¿™é‡Œä¼šç”ŸæˆExcelæ–‡ä»¶
        }

        function init() {
            renderCategoryStats();
            updateStats('week');

            // è®¾ç½®æ—¥æœŸé»˜è®¤å€¼
            const today = new Date();
            const weekAgo = new Date(today.getTime() - 7 * 24 * 60 * 60 * 1000);
            document.getElementById('startDate').value = weekAgo.toISOString().substring(0, 10);
            document.getElementById('endDate').value = today.toISOString().substring(0, 10);
        }

        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
