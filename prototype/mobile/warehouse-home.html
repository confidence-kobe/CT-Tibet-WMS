<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ä»“ç®¡å‘˜é¦–é¡µ - ä»“åº“ç®¡ç†ç³»ç»Ÿ</title>
    <link rel="stylesheet" href="../assets/css/mobile-common.css">
</head>
<body>
    <div class="mobile-container">
        <!-- å¯¼èˆªæ  -->
        <div class="navbar">
            <div class="navbar-title">ä»“åº“ç®¡ç†</div>
        </div>

        <!-- é¡µé¢å†…å®¹ -->
        <div class="page">
            <!-- ç»Ÿè®¡å¡ç‰‡ -->
            <div class="stat-grid">
                <div class="stat-item">
                    <div class="stat-icon" style="color: #1989fa;">ğŸ“¥</div>
                    <div class="stat-value">2</div>
                    <div class="stat-label">ä»Šæ—¥å…¥åº“</div>
                </div>
                <div class="stat-item">
                    <div class="stat-icon" style="color: #07c160;">ğŸ“¤</div>
                    <div class="stat-value">1</div>
                    <div class="stat-label">ä»Šæ—¥å‡ºåº“</div>
                </div>
                <div class="stat-item">
                    <div class="stat-icon" style="color: #ff976a;">â³</div>
                    <div class="stat-value">1</div>
                    <div class="stat-label">å¾…å®¡æ‰¹</div>
                </div>
                <div class="stat-item">
                    <div class="stat-icon" style="color: #ee0a24;">âš ï¸</div>
                    <div class="stat-value">2</div>
                    <div class="stat-label">åº“å­˜é¢„è­¦</div>
                </div>
            </div>

            <!-- å¿«æ·æ“ä½œ -->
            <div class="card">
                <div class="card-title">å¿«æ·æ“ä½œ</div>
                <div class="action-grid">
                    <div class="action-item" onclick="Toast.show('è·³è½¬åˆ°å¿«é€Ÿå…¥åº“')">
                        <div class="action-icon" style="color: #1989fa;">ğŸ“¥</div>
                        <div class="action-text">å¿«é€Ÿå…¥åº“</div>
                    </div>
                    <div class="action-item" onclick="Toast.show('è·³è½¬åˆ°å¿«é€Ÿå‡ºåº“')">
                        <div class="action-icon" style="color: #07c160;">ğŸ“¤</div>
                        <div class="action-text">å¿«é€Ÿå‡ºåº“</div>
                    </div>
                    <div class="action-item" onclick="location.href='approval-list.html'">
                        <div class="action-icon" style="color: #ff976a;">âœ“</div>
                        <div class="action-text">å®¡æ‰¹ç®¡ç†</div>
                    </div>
                    <div class="action-item" onclick="location.href='inventory-list.html'">
                        <div class="action-icon" style="color: #1989fa;">ğŸ“Š</div>
                        <div class="action-text">åº“å­˜æŸ¥è¯¢</div>
                    </div>
                    <div class="action-item" onclick="Toast.show('æ‰«ç åŠŸèƒ½')">
                        <div class="action-icon" style="color: #646566;">ğŸ“·</div>
                        <div class="action-text">æ‰«ç å…¥åº“</div>
                    </div>
                    <div class="action-item" onclick="Toast.show('æ¶ˆæ¯ä¸­å¿ƒ')">
                        <div class="action-icon" style="color: #646566;">ğŸ””</div>
                        <div class="action-text">æ¶ˆæ¯ä¸­å¿ƒ</div>
                    </div>
                </div>
            </div>

            <!-- å¾…åŠäº‹é¡¹ -->
            <div class="card">
                <div class="card-title">å¾…åŠäº‹é¡¹</div>
                <div id="todoList"></div>
            </div>

            <!-- åº“å­˜é¢„è­¦ -->
            <div class="card">
                <div class="card-title">åº“å­˜é¢„è­¦</div>
                <div class="list" id="stockAlertList"></div>
            </div>
        </div>

        <!-- TabBar -->
        <div class="tabbar">
            <div class="tabbar-item active" onclick="location.href='warehouse-home.html'">
                <div class="tabbar-icon">ğŸ </div>
                <div class="tabbar-text">é¦–é¡µ</div>
            </div>
            <div class="tabbar-item" onclick="location.href='approval-list.html'">
                <div class="tabbar-icon">âœ“</div>
                <div class="tabbar-text">å®¡æ‰¹</div>
            </div>
            <div class="tabbar-item" onclick="location.href='inventory-list.html'">
                <div class="tabbar-icon">ğŸ“Š</div>
                <div class="tabbar-text">åº“å­˜</div>
            </div>
            <div class="tabbar-item" onclick="Toast.show('æˆ‘çš„')">
                <div class="tabbar-icon">ğŸ‘¤</div>
                <div class="tabbar-text">æˆ‘çš„</div>
            </div>
        </div>
    </div>

    <script src="../assets/js/mock-data.js"></script>
    <script src="../assets/js/common.js"></script>
    <script>
        function renderTodoList() {
            const todoList = document.getElementById('todoList');
            const pendingApplies = mockData.applyList.filter(a => a.status === 0);
            const pendingOutbounds = mockData.outboundList.filter(o => o.status === 0);

            let html = '';

            if (pendingApplies.length > 0) {
                html += `
                    <div class="list-item" onclick="location.href='approval-list.html'">
                        <div class="list-header">
                            <div class="list-title">â³ å¾…å®¡æ‰¹ç”³è¯·</div>
                            <span class="tag tag-warning">${pendingApplies.length}ä¸ª</span>
                        </div>
                        <div class="list-info">æœ‰å‘˜å·¥ç”³è¯·éœ€è¦å®¡æ‰¹ï¼Œè¯·åŠæ—¶å¤„ç†</div>
                    </div>
                `;
            }

            if (pendingOutbounds.length > 0) {
                html += `
                    <div class="list-item" onclick="Toast.show('è·³è½¬åˆ°å¾…é¢†å–åˆ—è¡¨')">
                        <div class="list-header">
                            <div class="list-title">ğŸ“¦ å¾…é¢†å–å‡ºåº“å•</div>
                            <span class="tag tag-info">${pendingOutbounds.length}ä¸ª</span>
                        </div>
                        <div class="list-info">æœ‰å‡ºåº“å•å¾…å‘˜å·¥é¢†å–</div>
                    </div>
                `;
            }

            if (pendingApplies.length === 0 && pendingOutbounds.length === 0) {
                html = '<div class="empty-state"><div class="empty-icon">âœ“</div><div class="empty-text">æš‚æ— å¾…åŠäº‹é¡¹</div></div>';
            }

            todoList.innerHTML = html;
        }

        function renderStockAlert() {
            const alertList = document.getElementById('stockAlertList');
            const alerts = mockData.inventoryList.filter(i => i.status === 2 || i.status === 3);

            let html = '';

            alerts.slice(0, 3).forEach(item => {
                const icon = item.status === 3 ? 'â›”' : 'âš ï¸';
                html += `
                    <div class="list-item">
                        <div class="list-header">
                            <div class="list-title">${icon} ${item.materialName}</div>
                            <span class="tag ${item.status === 3 ? 'tag-danger' : 'tag-warning'}">${item.statusText}</span>
                        </div>
                        <div class="list-info">${item.spec} | å½“å‰ï¼š${item.quantity}${item.unit}</div>
                    </div>
                `;
            });

            if (alerts.length === 0) {
                html = '<div class="empty-state"><div class="empty-icon">âœ“</div><div class="empty-text">åº“å­˜æ­£å¸¸</div></div>';
            }

            alertList.innerHTML = html;
        }

        function init() {
            renderTodoList();
            renderStockAlert();
        }

        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
