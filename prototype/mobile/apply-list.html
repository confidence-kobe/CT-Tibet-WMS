<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æˆ‘çš„ç”³è¯· - ä»“åº“ç®¡ç†ç³»ç»Ÿ</title>
    <link rel="stylesheet" href="../assets/css/mobile-common.css">
</head>
<body>
    <div class="mobile-container">
        <div class="navbar">
            <div class="navbar-back" onclick="goBack()">â†</div>
            <div class="navbar-title">æˆ‘çš„ç”³è¯·</div>
        </div>

        <div class="page">
            <!-- ç­›é€‰æ  -->
            <div class="filter-bar">
                <div class="filter-tab active" onclick="filterByStatus(null)">å…¨éƒ¨</div>
                <div class="filter-tab" onclick="filterByStatus(0)">å¾…å®¡æ‰¹</div>
                <div class="filter-tab" onclick="filterByStatus(1)">å·²é€šè¿‡</div>
                <div class="filter-tab" onclick="filterByStatus(2)">å·²æ‹’ç»</div>
            </div>

            <!-- ç”³è¯·åˆ—è¡¨ -->
            <div class="list" id="applyList"></div>
        </div>

        <div class="tabbar">
            <div class="tabbar-item" onclick="location.href='employee-home.html'"><div class="tabbar-icon">ğŸ </div><div class="tabbar-text">é¦–é¡µ</div></div>
            <div class="tabbar-item active"><div class="tabbar-icon">ğŸ“</div><div class="tabbar-text">æˆ‘çš„ç”³è¯·</div></div>
            <div class="tabbar-item" onclick="location.href='inventory-list.html'"><div class="tabbar-icon">ğŸ“Š</div><div class="tabbar-text">åº“å­˜</div></div>
            <div class="tabbar-item" onclick="Toast.show('æˆ‘çš„')"><div class="tabbar-icon">ğŸ‘¤</div><div class="tabbar-text">æˆ‘çš„</div></div>
        </div>
    </div>

    <script src="../assets/js/mock-data.js"></script>
    <script src="../assets/js/common.js"></script>
    <script>
        function renderList(status = null) {
            const list = document.getElementById('applyList');
            let data = mockData.applyList.filter(a => a.applyUserId === 3);

            if (status !== null) {
                data = data.filter(a => a.status === status);
            }

            let html = '';
            data.forEach(item => {
                html += `
                    <div class="list-item">
                        <div class="list-header">
                            <div class="list-title">${item.code}</div>
                            ${getStatusTag(item.status, item.statusText, 'apply')}
                        </div>
                        <div class="list-info">${item.purpose}</div>
                        <div class="list-meta">
                            <span>${item.itemCount}ç§ç‰©èµ„ | ${formatMoney(item.totalAmount)}</span>
                            <span>${formatDateTime(item.applyTime)}</span>
                        </div>
                        ${item.status === 2 ? `<div style="margin-top: 8px; padding: 8px; background: #fff1f0; border-radius: 4px; font-size: 13px; color: #ee0a24;">æ‹’ç»ç†ç”±ï¼š${item.approveRemark}</div>` : ''}
                    </div>
                `;
            });

            if (data.length === 0) {
                html = '<div class="empty-state"><div class="empty-icon">ğŸ“­</div><div class="empty-text">æš‚æ— ç”³è¯·è®°å½•</div></div>';
            }

            list.innerHTML = html;
        }

        function filterByStatus(status) {
            renderList(status);
            document.querySelectorAll('.filter-tab').forEach((tab, i) => {
                tab.className = 'filter-tab' + ([null, 0, 1, 2][i] === status ? ' active' : '');
            });
        }

        document.addEventListener('DOMContentLoaded', () => renderList());
    </script>
</body>
</html>
