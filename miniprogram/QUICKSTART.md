# å¿«é€Ÿå¯åŠ¨æŒ‡å—

5 åˆ†é’Ÿå¿«é€Ÿå¯åŠ¨ CT-Tibet-WMS å°ç¨‹åºå¼€å‘ç¯å¢ƒã€‚

## å‰ç½®è¦æ±‚

ç¡®ä¿å·²å®‰è£…ä»¥ä¸‹å·¥å…·ï¼š

- âœ… **å¾®ä¿¡å¼€å‘è€…å·¥å…·** - [ä¸‹è½½åœ°å€](https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html)
- âœ… **HBuilderX**ï¼ˆå¯é€‰ï¼‰ - [ä¸‹è½½åœ°å€](https://www.dcloud.io/hbuilderx.html)
- âœ… **Node.js** >= 12.0.0 - [ä¸‹è½½åœ°å€](https://nodejs.org/)

## å¿«é€Ÿå¼€å§‹

### æ–¹å¼ä¸€ï¼šä½¿ç”¨ HBuilderXï¼ˆæ¨èï¼‰

**æ­¥éª¤ 1ï¼šæ‰“å¼€é¡¹ç›®**
```
1. å¯åŠ¨ HBuilderX
2. æ–‡ä»¶ â†’ æ‰“å¼€ç›®å½•
3. é€‰æ‹© miniprogram æ–‡ä»¶å¤¹
```

**æ­¥éª¤ 2ï¼šé…ç½® AppID**

ç¼–è¾‘ `manifest.json`ï¼š
```json
{
  "mp-weixin": {
    "appid": "ä½ çš„æµ‹è¯•AppID",  // ä¿®æ”¹è¿™é‡Œ
    "setting": {
      "urlCheck": false      // å¼€å‘æ—¶ä¸æ ¡éªŒåŸŸå
    }
  }
}
```

> ğŸ’¡ **æç¤º**ï¼šå¦‚æœæ²¡æœ‰ AppIDï¼Œå¯ä»¥ä½¿ç”¨æµ‹è¯•å·
> - å¾®ä¿¡å¼€å‘è€…å·¥å…· â†’ ç™»å½• â†’ é€‰æ‹©"ä½¿ç”¨æµ‹è¯•å·"

**æ­¥éª¤ 3ï¼šé…ç½® API åœ°å€**

ç¼–è¾‘ `utils/request.js`ï¼š
```javascript
// å¼€å‘ç¯å¢ƒ API åœ°å€
const baseURL = 'http://localhost:8080'  // ä¿®æ”¹ä¸ºä½ çš„åç«¯åœ°å€
```

**æ­¥éª¤ 4ï¼šè¿è¡Œé¡¹ç›®**
```
1. å·¥å…·æ  â†’ è¿è¡Œ
2. è¿è¡Œåˆ°å°ç¨‹åºæ¨¡æ‹Ÿå™¨
3. å¾®ä¿¡å¼€å‘è€…å·¥å…·
4. ç­‰å¾…ç¼–è¯‘å®Œæˆ
```

### æ–¹å¼äºŒï¼šä½¿ç”¨å‘½ä»¤è¡Œ

**æ­¥éª¤ 1ï¼šè¿›å…¥é¡¹ç›®ç›®å½•**
```bash
cd miniprogram
```

**æ­¥éª¤ 2ï¼šå®‰è£…ä¾èµ–**
```bash
npm install
```

**æ­¥éª¤ 3ï¼šé…ç½®æ–‡ä»¶**

åŒæ–¹å¼ä¸€çš„æ­¥éª¤ 2 å’Œ 3

**æ­¥éª¤ 4ï¼šè¿è¡Œå¼€å‘æœåŠ¡**
```bash
npm run dev:mp-weixin
```

**æ­¥éª¤ 5ï¼šæ‰“å¼€å¾®ä¿¡å¼€å‘è€…å·¥å…·**
```
1. æ‰“å¼€å¾®ä¿¡å¼€å‘è€…å·¥å…·
2. å¯¼å…¥é¡¹ç›®
3. é€‰æ‹© dist/dev/mp-weixin ç›®å½•
4. å¡«å†™ AppID
5. å¯¼å…¥
```

## ç™»å½•æµ‹è¯•

### æ¨¡æ‹Ÿç™»å½•ï¼ˆåç«¯æœªå°±ç»ªæ—¶ï¼‰

åœ¨ `utils/request.js` ä¸­æ·»åŠ  mock æ•°æ®ï¼š

```javascript
// ä¸´æ—¶ mock ç™»å½•
if (url === '/api/auth/wechat-login') {
  return {
    code: 200,
    data: {
      token: 'mock-token-123456',
      userInfo: {
        id: '1',
        realName: 'å¼ ä¸‰',
        phone: '13800138000',
        deptId: '1',
        deptName: 'æŠ€æœ¯éƒ¨',
        roleCode: 'USER',  // USER | WAREHOUSE | DEPT_ADMIN
        roleName: 'å‘˜å·¥',
        avatar: ''
      }
    }
  }
}
```

### çœŸå®ç™»å½•ï¼ˆåç«¯å·²å°±ç»ªï¼‰

ç¡®ä¿åç«¯å·²å¯åŠ¨å¹¶é…ç½® CORSï¼š

```java
// Spring Boot åç«¯é…ç½®
@CrossOrigin(origins = "*")
@PostMapping("/auth/wechat-login")
public Result wechatLogin(@RequestBody WechatLoginDTO dto) {
    // ç™»å½•é€»è¾‘
}
```

## åˆ‡æ¢è§’è‰²æµ‹è¯•

### æµ‹è¯•å‘˜å·¥è§’è‰²

ä¿®æ”¹ mock æ•°æ®ä¸­çš„ `roleCode`:
```javascript
roleCode: 'USER',     // å‘˜å·¥
roleName: 'å‘˜å·¥',
```

TabBar æ˜¾ç¤ºï¼šé¦–é¡µã€ç”³è¯·ã€åº“å­˜ã€æˆ‘çš„

### æµ‹è¯•ä»“ç®¡è§’è‰²

ä¿®æ”¹ mock æ•°æ®ä¸­çš„ `roleCode`:
```javascript
roleCode: 'WAREHOUSE',  // ä»“åº“ç®¡ç†å‘˜
roleName: 'ä»“åº“ç®¡ç†å‘˜',
```

TabBar æ˜¾ç¤ºï¼šé¦–é¡µã€å®¡æ‰¹ã€åº“å­˜ã€å¿«æ·ã€æˆ‘çš„

## å¸¸ç”¨åŠŸèƒ½æµ‹è¯•

### 1. æµ‹è¯•ç”³è¯·æµç¨‹

**å‘˜å·¥ç«¯ï¼š**
```
1. åˆ‡æ¢åˆ°å‘˜å·¥è§’è‰²
2. è¿›å…¥"ç”³è¯·"é¡µé¢
3. ç‚¹å‡»"æ–°å»ºç”³è¯·"
4. é€‰æ‹©ç‰©èµ„ â†’ å¡«å†™æ•°é‡ â†’ å¡«å†™ç”¨é€”
5. æäº¤ç”³è¯·
6. åœ¨"ç”³è¯·"åˆ—è¡¨æŸ¥çœ‹çŠ¶æ€
```

**ä»“ç®¡ç«¯ï¼š**
```
1. åˆ‡æ¢åˆ°ä»“ç®¡è§’è‰²
2. è¿›å…¥"å®¡æ‰¹"é¡µé¢
3. ç‚¹å‡»å¾…å®¡æ‰¹çš„ç”³è¯·
4. æŸ¥çœ‹è¯¦æƒ…å’Œåº“å­˜çŠ¶æ€
5. ç‚¹å‡»"é€šè¿‡"æˆ–"æ‹’ç»"
6. å¡«å†™æ„è§å¹¶ç¡®è®¤
```

### 2. æµ‹è¯•å‡ºåº“æµç¨‹

**ç›´æ¥å‡ºåº“ï¼š**
```
1. ä»“ç®¡è§’è‰²
2. é¦–é¡µ â†’ å¿«é€Ÿå‡ºåº“
3. é€‰æ‹©é¢†ç”¨äºº
4. é€‰æ‹©ç‰©èµ„å’Œæ•°é‡
5. æäº¤ï¼ˆç«‹å³æ‰£åº“å­˜ï¼‰
```

**ç”³è¯·å‡ºåº“ï¼š**
```
1. å‘˜å·¥ç”³è¯· â†’ ä»“ç®¡å®¡æ‰¹é€šè¿‡
2. ä»“ç®¡è¿›å…¥"å¿«æ·" â†’ "å¾…é¢†å–"
3. æ‰¾åˆ°å¯¹åº”å‡ºåº“å•
4. ç‚¹å‡»"ç¡®è®¤å‡ºåº“"
5. å‹¾é€‰"å‘˜å·¥å·²åˆ°åœºç­¾å­—ç¡®è®¤"
6. ç¡®è®¤ï¼ˆæ­¤æ—¶æ‰£åº“å­˜ï¼‰
```

### 3. æµ‹è¯•å…¥åº“æµç¨‹

```
1. ä»“ç®¡è§’è‰²
2. é¦–é¡µ â†’ å¿«é€Ÿå…¥åº“
3. é€‰æ‹©ä»“åº“
4. é€‰æ‹©å…¥åº“ç±»å‹
5. æ·»åŠ ç‰©èµ„æ˜ç»†
6. å¡«å†™æ•°é‡å’Œå•ä»·
7. æäº¤ï¼ˆç«‹å³å¢åŠ åº“å­˜ï¼‰
```

## Mock æ•°æ®ç¤ºä¾‹

### ç”³è¯·åˆ—è¡¨ Mock

åœ¨ `utils/request.js` æ·»åŠ ï¼š

```javascript
if (url === '/api/applies/my') {
  return {
    code: 200,
    data: {
      records: [
        {
          id: '1',
          applyNo: 'AP202501110001',
          status: 0,  // 0:å¾…å®¡æ‰¹ 1:å·²é€šè¿‡ 2:å·²æ‹’ç» 3:å·²å‡ºåº“ 4:å·²å–æ¶ˆ
          purpose: 'åŠå…¬ç”¨å“ç”³è¯·',
          materialCount: 3,
          applicantName: 'å¼ ä¸‰',
          applyTime: '2025-01-11 10:00:00',
          isTimeout: false
        },
        {
          id: '2',
          applyNo: 'AP202501110002',
          status: 1,
          purpose: 'ä¼šè®®å®¤ç‰©èµ„',
          materialCount: 2,
          applicantName: 'å¼ ä¸‰',
          applyTime: '2025-01-10 15:30:00',
          isTimeout: false,
          approverName: 'æå››',
          approvalTime: '2025-01-10 16:00:00'
        }
      ],
      total: 2,
      statusCount: {
        pending: 1,
        approved: 1,
        rejected: 0
      }
    }
  }
}
```

### åº“å­˜åˆ—è¡¨ Mock

```javascript
if (url === '/api/inventory') {
  return {
    code: 200,
    data: {
      records: [
        {
          id: '1',
          materialCode: 'M001',
          materialName: 'A4æ‰“å°çº¸',
          spec: '500å¼ /åŒ…',
          unit: 'åŒ…',
          categoryName: 'åŠå…¬ç”¨å“',
          quantity: 100,
          lockedQuantity: 10,
          availableQuantity: 90,
          minStock: 20,
          stockStatus: 0,  // 0:æ­£å¸¸ 1:ä½åº“å­˜ 2:ç¼ºè´§
          warehouseName: 'æŠ€æœ¯éƒ¨ä»“åº“',
          location: 'A-01-01'
        },
        {
          id: '2',
          materialCode: 'M002',
          materialName: 'ä¸­æ€§ç¬”',
          spec: '0.5mm é»‘è‰²',
          unit: 'æ”¯',
          categoryName: 'åŠå…¬ç”¨å“',
          quantity: 15,
          lockedQuantity: 5,
          availableQuantity: 10,
          minStock: 20,
          stockStatus: 1,  // ä½åº“å­˜
          warehouseName: 'æŠ€æœ¯éƒ¨ä»“åº“',
          location: 'A-01-02'
        }
      ],
      total: 2
    }
  }
}
```

## å¼€å‘å·¥å…·é…ç½®

### å¾®ä¿¡å¼€å‘è€…å·¥å…·

**æ¨èè®¾ç½®ï¼š**

1. **æœ¬åœ°è®¾ç½®ï¼š**
   - âœ… ä¸æ ¡éªŒåˆæ³•åŸŸå
   - âœ… ä¸æ ¡éªŒ TLS ç‰ˆæœ¬
   - âœ… å¯ç”¨è°ƒè¯•
   - âœ… è‡ªåŠ¨ä¿å­˜

2. **é¡¹ç›®é…ç½®ï¼š**
   - AppIDï¼šæµ‹è¯•å·æˆ–æ­£å¼ AppID
   - ES6 è½¬ ES5ï¼šå¼€å¯
   - æ ·å¼è‡ªåŠ¨è¡¥å…¨ï¼šå¼€å¯
   - ä»£ç è‡ªåŠ¨å‹ç¼©ï¼šå…³é—­ï¼ˆå¼€å‘æ—¶ï¼‰

### HBuilderX

**æ¨èæ’ä»¶ï¼š**
- uni-app ç¼–è¯‘æ’ä»¶
- scss/sass ç¼–è¯‘
- Vue è¯­æ³•æç¤º
- ESLint

**å¿«æ·é”®ï¼š**
- `Ctrl + R`ï¼šè¿è¡Œ
- `Ctrl + U Ctrl + U`ï¼šæ ¼å¼åŒ–ä»£ç 
- `Ctrl + /`ï¼šæ³¨é‡Š/å–æ¶ˆæ³¨é‡Š

## è°ƒè¯•æŠ€å·§

### 1. æ§åˆ¶å°è°ƒè¯•

```javascript
// ä½¿ç”¨ console.log
console.log('ç”¨æˆ·ä¿¡æ¯ï¼š', this.userInfo)

// ä½¿ç”¨ console.tableï¼ˆæ›´ç›´è§‚ï¼‰
console.table(this.applyList)

// ä½¿ç”¨ debugger
debugger  // ä»£ç ä¼šåœ¨æ­¤å¤„æš‚åœ
```

### 2. ç½‘ç»œè¯·æ±‚è°ƒè¯•

åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ï¼š
```
è°ƒè¯•å™¨ â†’ Network â†’ æŸ¥çœ‹æ‰€æœ‰è¯·æ±‚
```

åœ¨ `utils/request.js` æ·»åŠ æ—¥å¿—ï¼š
```javascript
console.log('è¯·æ±‚ URL:', url)
console.log('è¯·æ±‚å‚æ•°:', data)
console.log('å“åº”æ•°æ®:', response.data)
```

### 3. Vuex çŠ¶æ€è°ƒè¯•

```javascript
// åœ¨ç»„ä»¶ä¸­
console.log('Vuex State:', this.$store.state)
console.log('ç”¨æˆ·ä¿¡æ¯:', this.$store.state.userInfo)
console.log('Token:', this.$store.state.token)
```

### 4. çœŸæœºè°ƒè¯•

```
1. å¾®ä¿¡å¼€å‘è€…å·¥å…· â†’ å·¥å…·æ  â†’ é¢„è§ˆ
2. æ‰‹æœºæ‰«ç 
3. åœ¨çœŸæœºä¸Šæµ‹è¯•
4. æŸ¥çœ‹ console æ—¥å¿—ï¼šå¼€å‘è€…å·¥å…· â†’ è¿œç¨‹è°ƒè¯•
```

## å¸¸è§é—®é¢˜

### 1. ç¼–è¯‘å¤±è´¥

**é—®é¢˜**ï¼š`Error: Cannot find module 'sass'`

**è§£å†³**ï¼š
```bash
npm install sass sass-loader -D
```

### 2. é¡µé¢ä¸æ˜¾ç¤º

**æ£€æŸ¥é¡¹ï¼š**
- âœ… pages.json ä¸­æ˜¯å¦é…ç½®äº†é¡µé¢è·¯ç”±
- âœ… è·¯å¾„æ˜¯å¦æ­£ç¡®
- âœ… æ˜¯å¦æœ‰è¯­æ³•é”™è¯¯

### 3. æ¥å£è°ƒç”¨å¤±è´¥

**æ£€æŸ¥é¡¹ï¼š**
- âœ… åç«¯æœåŠ¡æ˜¯å¦å¯åŠ¨
- âœ… API åœ°å€æ˜¯å¦æ­£ç¡®
- âœ… æ˜¯å¦é…ç½®äº† CORS
- âœ… æ˜¯å¦å–æ¶ˆäº†åŸŸåæ ¡éªŒï¼ˆå¼€å‘æ—¶ï¼‰

### 4. æ ·å¼ä¸ç”Ÿæ•ˆ

**æ£€æŸ¥é¡¹ï¼š**
- âœ… style æ ‡ç­¾æ˜¯å¦æ·»åŠ  `scoped`
- âœ… æ˜¯å¦ä½¿ç”¨äº†æ­£ç¡®çš„å•ä½ï¼ˆrpxï¼‰
- âœ… é€‰æ‹©å™¨æ˜¯å¦æ­£ç¡®
- âœ… æ˜¯å¦æœ‰æ ·å¼æƒé‡å†²çª

### 5. Vuex æ•°æ®ä¸æ›´æ–°

**æ£€æŸ¥é¡¹ï¼š**
- âœ… æ˜¯å¦ä½¿ç”¨äº† mutation ä¿®æ”¹çŠ¶æ€
- âœ… æ˜¯å¦ä½¿ç”¨äº† mapState æˆ– mapGetters
- âœ… è®¡ç®—å±æ€§æ˜¯å¦æ­£ç¡®

## ä¸‹ä¸€æ­¥

ç°åœ¨ä½ å·²ç»æˆåŠŸå¯åŠ¨äº†é¡¹ç›®ï¼æ¥ä¸‹æ¥å¯ä»¥ï¼š

1. **æŸ¥çœ‹å®Œæ•´æ–‡æ¡£**
   - [README.md](./README.md) - é¡¹ç›®æ¦‚è§ˆ
   - [DEPLOYMENT.md](./DEPLOYMENT.md) - éƒ¨ç½²æŒ‡å—
   - [CONTRIBUTING.md](./CONTRIBUTING.md) - å¼€å‘è§„èŒƒ

2. **å¼€å§‹å¼€å‘**
   - å‚è€ƒç°æœ‰é¡µé¢ä»£ç 
   - éµå¾ªå¼€å‘è§„èŒƒ
   - æµ‹è¯•åŠŸèƒ½

3. **å‡†å¤‡ä¸Šçº¿**
   - å‡†å¤‡ TabBar å›¾æ ‡
   - å¯¹æ¥åç«¯ API
   - å®Œæ•´æµ‹è¯•
   - æäº¤å®¡æ ¸

## è·å–å¸®åŠ©

**æ–‡æ¡£ï¼š**
- [uni-app å®˜æ–¹æ–‡æ¡£](https://uniapp.dcloud.io/)
- [å¾®ä¿¡å°ç¨‹åºæ–‡æ¡£](https://developers.weixin.qq.com/miniprogram/dev/framework/)

**ç¤¾åŒºï¼š**
- uni-app è®ºå›
- å¾®ä¿¡å¼€æ”¾ç¤¾åŒº

**é¡¹ç›®ä»“åº“ï¼š**
- æäº¤ Issue
- æŸ¥çœ‹ Wiki

---

**ç¥å¼€å‘é¡ºåˆ©ï¼** ğŸš€
